import{_ as x}from"./logo-CC90_112.js";import{d as h,u as U,r as m,a as b,c as C,b as a,e as o,w as s,f as l,g as L,o as S,h as f,i as T,l as B,j as N,k as R,_ as q}from"./index-BsYwGHgQ.js";const A={class:"login-container"},H={class:"login-wrapper"},I={class:"login-right"},j=h({__name:"Login",setup(E){const g=L(),i=U(),r=m(),n=m(!1),t=b({username:"",password:"",code:"test"}),v={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},w=async()=>{r.value&&await r.value.validate(async p=>{if(p){n.value=!0;try{const e=await R.login(t);i.updateToken(e.data.access_token),i.updateUser(t),g.push("/")}catch(e){console.error("登录失败:",e)}finally{n.value=!1}}})};return(p,e)=>{const c=l("el-icon"),_=l("el-input"),d=l("el-form-item"),y=l("el-button"),V=l("el-form"),k=l("el-card");return S(),C("div",A,[a("div",H,[e[4]||(e[4]=a("div",{class:"login-left"},[a("div",{class:"logo"},[a("img",{src:x,alt:"Logo"})]),a("h1",null,"HUST_AI系统"),a("p",null,"高效、智能、便捷的HUSTer系统平台")],-1)),a("div",I,[o(k,{class:"login-card"},{header:s(()=>e[2]||(e[2]=[a("div",{class:"card-header"},[a("span",null,"系统登录")],-1)])),default:s(()=>[o(V,{model:t,rules:v,ref_key:"formRef",ref:r},{default:s(()=>[o(d,{prop:"username"},{default:s(()=>[o(_,{modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=u=>t.username=u),placeholder:"用户名"},{prefix:s(()=>[o(c,null,{default:s(()=>[o(f(T))]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(d,{prop:"password"},{default:s(()=>[o(_,{modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=u=>t.password=u),type:"password",placeholder:"密码"},{prefix:s(()=>[o(c,null,{default:s(()=>[o(f(B))]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(d,null,{default:s(()=>[o(y,{type:"primary",onClick:w,loading:n.value,style:{width:"100%"}},{default:s(()=>e[3]||(e[3]=[N(" 登录 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})])])])}}}),F=q(j,[["__scopeId","data-v-58985377"]]);export{F as default};
